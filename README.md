# Data_De_Indent

This repository contains a script for information de-identification.

### Data Fields to Be Removed:
**Exam:**
- Visit Number  
- Exam Date  
- Signed on  
- Billed on  
- Uploaded on  
- OrderID  

**Patient:**  
- PID  
- First Name  
- Last Name  
- DOB  
- Phone  

**Patient History **
The name of the patient is being replaced as xxxxxx, and all the date, except year, has also been removed.

## Limitation ##
It is important to note that the LLM is not 100% accurate and may occasionally generate incorrect results. For the Exam and Patient sections, de-identification is hard-coded, ensuring high accuracy as long as all data follows the same format as the five (5) examples provided. However, for the Patient History section, the output is generated by the LLM. Despite employing various techniques to enhance stability, errors may still occur in some cases. Nevertheless, we believe this script significantly reduces the time and labor required for processing medical data.

> **Note:** The `Raw_data` folder in this repository contains randomly generated personal information for testing purposes only.

---

### Usage

The automatic de-identification of patient history utilizes the open-source software Ollama. Please download Ollama first, according to
https://ollama.com


After installing Ollama, install the required LLM by running the following command in the terminal:

```bash
pip install ollama
ollama run internlm2:20
```

In this script, we use internlm2:20, which requires approximately 14 GB of graphics memory.

To run the code, use the following command:

```bash
python de_indent.py --target Raw_data --de_indent de_indent 

```

This command will automatically convert all files in Raw_data folder to de-identified files saved in the de_indent folder.

